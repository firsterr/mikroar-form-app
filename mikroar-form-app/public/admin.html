<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Admin Paneli</title>
  <style>
    body { font-family: Arial; margin: 20px; }
    input, select, textarea, button { display: block; margin: 10px 0; padding: 8px; }
    textarea { width: 300px; height: 100px; }
  </style>
</head>
<body>
  <h1>Yeni Soru Ekle</h1>
  <form id="questionForm">
    <label>Soru Metni:</label>
    <input type="text" id="question" required />

    <label>Yanıt Tipi:</label>
    <select id="type" required>
      <option value="radio">Tek Seçenek</option>
      <option value="checkbox">Çoklu Seçenek</option>
      <option value="text">Açık Uçlu</option>
    </select>

    <label>Seçenekler (her satıra bir seçenek yaz):</label>
    <textarea id="options"></textarea>

    <button type="submit">Kaydet</button>
  </form>

  <script>
    document.getElementById("questionForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const question = document.getElementById("question").value;
      const type = document.getElementById("type").value;
      const options = document.getElementById("options").value
        .split("\n")
        .map(opt => opt.trim())
        .filter(opt => opt !== "");

      const res = await fetch("/add-question", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ question, type, options })
      });

      const data = await res.json();
      if (data.ok) {
        alert("Soru eklendi!");
        document.getElementById("questionForm").reset();
      } else {
        alert("Hata oluştu!");
      }
    });
  </script>
</body>
</html>
